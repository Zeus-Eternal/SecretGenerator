const readline = require('readline');
const {
  generateSecretKey,
  generateSecretKeys,
} = require('./secretGEN');

const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout
});

const generateSingleKey = () => {
  rl.question('Enter the length of the secret key in bits: ', (length) => {
    const secretKey = generateSecretKey(parseInt(length));
    console.log('Generated secret key:', secretKey);
    rl.close();
  });
};

const generateMultipleKeys = () => {
  rl.question('Enter the length of the secret keys in bits: ', (length) => {
    rl.question('Enter the number of secret keys to generate: ', (count) => {
      const secretKeys = generateSecretKeys(parseInt(count), parseInt(length));
      console.log(`Generated ${count} secret key(s) of length ${length} bits:`);
      secretKeys.forEach((secretKey, index) => {
        console.log(`Secret Key ${index + 1}: ${secretKey}`);
      });
      rl.close();
    });
  });
};

const showMenu = () => {
  console.log('Secret Key Generator');
  console.log('---------------------');
  console.log('1. Generate Single Key');
  console.log('2. Generate Multiple Keys');
  console.log('3. Exit');

  rl.question('Enter your choice: ', (choice) => {
    switch (choice) {
      case '1':
        generateSingleKey();
        break;
      case '2':
        generateMultipleKeys();
        break;
      case '3':
        rl.close();
        break;
      default:
        console.log('Invalid choice. Please try again.\n');
        showMenu();
        break;
    }
  });
};

showMenu();
